{% extends "DnDSite/base.html" %}

{% block content %}
<div class="container">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ -->
    <a href="{% url 'spell_list' %}" class="btn btn-outline-secondary mb-3">
        ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π
    </a>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è -->
    <div class="card shadow">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —É—Ä–æ–≤–Ω–µ–º –∏ —à–∫–æ–ª–æ–π -->
        <div class="card-header bg-primary text-white">
            <div class="row">
                <div class="col">
                    <h1 class="h2 mb-0">{{ spell.name }}</h1>
                </div>
                <div class="col-auto">
                    <div class="d-flex gap-2">
                        <!-- –£—Ä–æ–≤–µ–Ω—å –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è -->
                        <span class="badge bg-light text-dark fs-6">
                            {% if spell.level == 0 %}
                                –ó–∞–≥–æ–≤–æ—Ä
                            {% else %}
                                {{ spell.level }} —É—Ä–æ–≤–µ–Ω—å
                            {% endif %}
                        </span>
                        
                        <!-- –®–∫–æ–ª–∞ –º–∞–≥–∏–∏ -->
                        <span class="badge bg-info fs-6">
                            {{ spell.get_school_display }}
                        </span>
                        
                        <!-- –†–∏—Ç—É–∞–ª -->
                        {% if spell.ritual %}
                        <span class="badge bg-warning text-dark fs-6">
                            –†–∏—Ç—É–∞–ª
                        </span>
                        {% endif %}
                        
                        <!-- –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è -->
                        {% if spell.concentration %}
                        <span class="badge bg-danger fs-6">
                            –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è
                        </span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card-body">
            <div class="row">
                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
                <div class="col-md-8">
                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                    <div class="mb-4">
                        <h4 class="border-bottom pb-2">–û–ø–∏—Å–∞–Ω–∏–µ</h4>
                        <p class="lead">{{ spell.desc|linebreaks }}</p>
                    </div>
                    
                    <!-- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ -->
                    <div class="row">
                        <div class="col-md-6">
                            <h5 class="border-bottom pb-2">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h5>
                            <table class="table table-sm">
                                <tbody>
                                    <tr>
                                        <th scope="row">–í—Ä–µ–º—è –Ω–∞–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è</th>
                                        <td>{{ spell.casting_time }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">–î–∞–ª—å–Ω–æ—Å—Ç—å</th>
                                        <td>{{ spell.spell_range }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                        <td>{{ spell.duration }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">–¢—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏</th>
                                        <td>
                                            {% if spell.concentration %}
                                                <span class="text-success">–î–∞</span>
                                            {% else %}
                                                <span class="text-secondary">–ù–µ—Ç</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row">–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —Ä–∏—Ç—É–∞–ª</th>
                                        <td>
                                            {% if spell.ritual %}
                                                <span class="text-success">–î–∞</span>
                                            {% else %}
                                                <span class="text-secondary">–ù–µ—Ç</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã -->
                        <div class="col-md-6">
                            <h5 class="border-bottom pb-2">–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h5>
                            <div class="d-flex flex-wrap gap-2 mb-3">
                                {% for component in components %}
                                <span class="badge 
                                    {% if component.type == 'V' %}bg-success
                                    {% elif component.type == 'S' %}bg-warning text-dark
                                    {% else %}bg-secondary
                                    {% endif %} fs-6 p-2">
                                    {{ component.get_type_display }}
                                </span>
                                {% empty %}
                                <span class="text-muted">–ù–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</span>
                                {% endfor %}
                            </div>
                            
                            <!-- –õ–µ–≥–µ–Ω–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -->
                            <div class="small text-muted mt-3">
                                <p><strong>–õ–µ–≥–µ–Ω–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</strong></p>
                                <ul class="list-unstyled">
                                    <li><span class="badge bg-success">–í</span> ‚Äî –í–µ—Ä–±–∞–ª—å–Ω—ã–π (—Ä–µ—á—å)</li>
                                    <li><span class="badge bg-warning text-dark">–°</span> ‚Äî –°–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (–∂–µ—Å—Ç—ã)</li>
                                    <li><span class="badge bg-secondary">–ú</span> ‚Äî –ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π (—Ñ–æ–∫—É—Å –∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
                <div class="col-md-4">
                    <div class="card border-primary">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">–°–≤–æ–¥–∫–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <strong>–£—Ä–æ–≤–µ–Ω—å:</strong><br>
                                {% if spell.level == 0 %}
                                    <span class="badge bg-light text-dark">–ó–∞–≥–æ–≤–æ—Ä</span>
                                {% else %}
                                    <span class="badge bg-dark">
                                        {{ spell.level }}-–π —É—Ä–æ–≤–µ–Ω—å
                                    </span>
                                {% endif %}
                            </div>
                            
                            <div class="mb-3">
                                <strong>–®–∫–æ–ª–∞ –º–∞–≥–∏–∏:</strong><br>
                                <span class="badge bg-info">{{ spell.get_school_display }}</span>
                            </div>
                            
                            <div class="mb-3">
                                <strong>–í—Ä–µ–º—è –Ω–∞–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è:</strong><br>
                                <code>{{ spell.casting_time }}</code>
                            </div>
                            
                            <div class="mb-3">
                                <strong>–î–∞–ª—å–Ω–æ—Å—Ç—å:</strong><br>
                                <code>{{ spell.spell_range }}</code>
                            </div>
                            
                            <div class="mb-3">
                                <strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong><br>
                                <code>{{ spell.duration }}</code>
                            </div>
                            
                            {% if spell.ritual or spell.concentration %}
                            <div class="mb-3">
                                <strong>–û—Å–æ–±—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:</strong><br>
                                {% if spell.ritual %}
                                    <span class="badge bg-warning text-dark me-1">–†–∏—Ç—É–∞–ª</span>
                                {% endif %}
                                {% if spell.concentration %}
                                    <span class="badge bg-danger">–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è</span>
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–∞–≤–∏–ª–∞ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è -->
                    <div class="card mt-3 border-info">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0">üìö –ü—Ä–∞–≤–∏–ª–∞ D&D</h6>
                        </div>
                        <div class="card-body small">
                            <p><strong>–ó–∞–≥–æ–≤–æ—Ä—ã</strong> ‚Äî –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è 0-–≥–æ —É—Ä–æ–≤–Ω—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —è—á–µ–µ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π.</p>
                            <p><strong>–†–∏—Ç—É–∞–ª—ã</strong> ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ –∑–∞—Ç—Ä–∞—Ç—ã —è—á–µ–π–∫–∏, –Ω–æ –≤—Ä–µ–º—è –Ω–∞–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 10 –º–∏–Ω—É—Ç.</p>
                            <p><strong>–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è</strong> ‚Äî —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –≤—Å—ë –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –§—É—Ç–µ—Ä —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
        <div class="card-footer bg-light">
            <div class="row">
                <div class="col">
                    <small class="text-muted">
                        ID –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è: {{ spell.id }} | 
                        –û–±–Ω–æ–≤–ª–µ–Ω–æ: {% now "SHORT_DATETIME_FORMAT" %}
                    </small>
                </div>
                <div class="col-auto">
                    <!-- –°—Å—ã–ª–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (–∑–∞–≥–ª—É—à–∫–∞) -->
                    <button class="btn btn-sm btn-outline-success">
                        <i class="bi bi-star"></i> –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                    </button>
                    <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è (–∑–∞–≥–ª—É—à–∫–∞) -->
                    <button class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-share"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ -->
<style>
    .card {
        border-radius: 10px;
        overflow: hidden;
    }
    .badge {
        font-size: 0.9em;
        padding: 0.5em 0.8em;
    }
    .lead {
        font-size: 1.1rem;
        line-height: 1.6;
    }
    .border-bottom {
        border-bottom: 2px solid #dee2e6 !important;
    }
    .table th {
        width: 40%;
    }
</style>
{% endblock %}